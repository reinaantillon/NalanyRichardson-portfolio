[
  {
    "objectID": "synthetic-analysis/synthetic-analysis.html",
    "href": "synthetic-analysis/synthetic-analysis.html",
    "title": "Synthetic Data Exploratory Analysis",
    "section": "",
    "text": "Load the packages.\n\n\nWarning: package 'purrr' was built under R version 4.5.2\n\n\nWarning: package 'ggplot2' was built under R version 4.5.2\n\n\n\n# Set a seed for reproducibility\nset.seed(234)\n# Define the number of observations (patients) to generate\nn_patients &lt;- 100\n\n# Create an empty data frame with placeholders for variables\nsyn_dat &lt;- data.frame(\n  PatientID = numeric(n_patients),\n  Age = numeric(n_patients),\n  Gender = character(n_patients),\n  TreatmentGroup = character(n_patients),\n  EnrollmentDate = lubridate::as_date(character(n_patients)),\n  BloodPressure = numeric(n_patients),\n  Troponin = numeric(n_patients),\n  AdverseEvent = integer(n_patients)\n)\n\n# Variable 1: Patient ID\nsyn_dat$PatientID &lt;- 1:n_patients\n\n# Variable 2: Age (numeric variable)\nsyn_dat$Age &lt;- round(rnorm(n_patients, mean = 60, sd = 10), 1)\n\n# Variable 3: Gender (categorical variable)\nsyn_dat$Gender &lt;- purrr::map_chr(sample(c(\"Male\", \"Female\"), n_patients, replace = TRUE), as.character)\n\n# Variable 4: Treatment Group (categorical variable)\nsyn_dat$TreatmentGroup &lt;- purrr::map_chr(sample(c(\"A\", \"B\", \"Placebo\"), n_patients, replace = TRUE), as.character)\n\n# Variable 5: Date of Enrollment (date variable)\nsyn_dat$EnrollmentDate &lt;- lubridate::as_date(sample(seq(from = lubridate::as_date(\"2022-01-01\"), to = lubridate::as_date(\"2022-12-31\"), by = \"days\"), n_patients, replace = TRUE))\n\n# Variable 6: Blood Pressure (numeric variable)\nsyn_dat$BloodPressure &lt;- round(runif(n_patients, min = 90, max = 160), 1)\n\n# Variable 7: Troponin level (numeric variable)\n# Option 1: Troponin level is independent of treatment\n#syn_dat$Troponin &lt;- round(rnorm(n_patients, mean = 0.10, sd = 0.15), 1)\n\n# Option 2: Troponin is dependent on treatment\nsyn_dat$Troponin[syn_dat$TreatmentGroup == \"A\"] &lt;- pmax(round(rnorm(sum(syn_dat$TreatmentGroup == \"A\"), mean = 0.035, sd = 0.012), 3), 0.001)\nsyn_dat$Troponin[syn_dat$TreatmentGroup == \"B\"] &lt;- pmax(round(rnorm(sum(syn_dat$TreatmentGroup == \"B\"), mean = 0.085, sd = 0.020), 3), 0.001)\nsyn_dat$Troponin[syn_dat$TreatmentGroup == \"Placebo\"] &lt;- pmax(round(rnorm(sum(syn_dat$TreatmentGroup == \"Placebo\"), mean = 0.260, sd = 0.060), 3), 0.001)\n\n# Variable 8: Adverse Event (binary variable, 0 = No, 1 = Yes)\n# Option 1: Adverse events are independent of treatment\n#syn_dat$AdverseEvent &lt;- purrr::map_int(sample(0:1, n_patients, replace = TRUE, prob = c(0.8, 0.2)), as.integer)\n\n# Option 2: Adverse events are influenced by treatment status\nsyn_dat$AdverseEvent[syn_dat$TreatmentGroup == \"A\"] &lt;- purrr::map_int(sample(0:1, sum(syn_dat$TreatmentGroup == \"A\"), replace = TRUE, prob = c(0.5, 0.5)), as.integer)\nsyn_dat$AdverseEvent[syn_dat$TreatmentGroup == \"B\"] &lt;- purrr::map_int(sample(0:1, sum(syn_dat$TreatmentGroup == \"B\"), replace = TRUE, prob = c(0.7, 0.3)), as.integer)\nsyn_dat$AdverseEvent[syn_dat$TreatmentGroup == \"Placebo\"] &lt;- purrr::map_int(sample(0:1, sum(syn_dat$TreatmentGroup == \"Placebo\"), replace = TRUE, prob = c(0.9, 0.1)), as.integer)\n\n\n# Print the first few rows of the generated data\nhead(syn_dat)\n\n  PatientID  Age Gender TreatmentGroup EnrollmentDate BloodPressure Troponin\n1         1 66.6 Female              B     2022-04-22         121.6    0.063\n2         2 39.5 Female        Placebo     2022-09-08         110.3    0.265\n3         3 45.0 Female        Placebo     2022-05-15         100.4    0.277\n4         4 74.7   Male        Placebo     2022-09-15         119.8    0.340\n5         5 74.6   Male        Placebo     2022-06-27         127.7    0.191\n6         6 61.4 Female              B     2022-11-14         121.6    0.093\n  AdverseEvent\n1            0\n2            0\n3            0\n4            0\n5            0\n6            0\n\n\n\n# Grab summary of synthetic data\nsummary(syn_dat)\n\n   PatientID           Age           Gender          TreatmentGroup    \n Min.   :  1.00   Min.   :29.60   Length:100         Length:100        \n 1st Qu.: 25.75   1st Qu.:53.55   Class :character   Class :character  \n Median : 50.50   Median :61.70   Mode  :character   Mode  :character  \n Mean   : 50.50   Mean   :60.04                                        \n 3rd Qu.: 75.25   3rd Qu.:66.15                                        \n Max.   :100.00   Max.   :81.10                                        \n EnrollmentDate       BloodPressure      Troponin       AdverseEvent \n Min.   :2022-01-03   Min.   : 90.5   Min.   :0.0110   Min.   :0.00  \n 1st Qu.:2022-04-25   1st Qu.:107.0   1st Qu.:0.0480   1st Qu.:0.00  \n Median :2022-07-15   Median :121.9   Median :0.0930   Median :0.00  \n Mean   :2022-07-06   Mean   :123.6   Mean   :0.1353   Mean   :0.31  \n 3rd Qu.:2022-09-17   3rd Qu.:141.2   3rd Qu.:0.2320   3rd Qu.:1.00  \n Max.   :2022-12-27   Max.   :159.8   Max.   :0.4000   Max.   :1.00  \n\ndplyr::glimpse(syn_dat)  \n\nRows: 100\nColumns: 8\n$ PatientID      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, …\n$ Age            &lt;dbl&gt; 66.6, 39.5, 45.0, 74.7, 74.6, 61.4, 62.1, 29.6, 55.1, 4…\n$ Gender         &lt;chr&gt; \"Female\", \"Female\", \"Female\", \"Male\", \"Male\", \"Female\",…\n$ TreatmentGroup &lt;chr&gt; \"B\", \"Placebo\", \"Placebo\", \"Placebo\", \"Placebo\", \"B\", \"…\n$ EnrollmentDate &lt;date&gt; 2022-04-22, 2022-09-08, 2022-05-15, 2022-09-15, 2022-0…\n$ BloodPressure  &lt;dbl&gt; 121.6, 110.3, 100.4, 119.8, 127.7, 121.6, 134.4, 107.4,…\n$ Troponin       &lt;dbl&gt; 0.063, 0.265, 0.277, 0.340, 0.191, 0.093, 0.011, 0.235,…\n$ AdverseEvent   &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0…\n\n# Frequency table for adverse events stratified by treatment\ntable(syn_dat$AdverseEvent,syn_dat$TreatmentGroup)\n\n   \n     A  B Placebo\n  0 11 26      32\n  1 20  8       3\n\n\n\n# Boxplot of Troponin levels by treatment group\nggplot(syn_dat, aes(x = TreatmentGroup, y = Troponin)) +\n  geom_boxplot() +\n  labs(title = \"Troponin Levels by Treatment\", x = \"Treatment Group\", y = \"Troponin Level\") +\n  theme_bw()\n\n\n\n\n\n\n\n# There is a difference in troponin levels across treatment groups, \n# with the placebo group having higher levels on average, and treatment group A has the lowest levels, which \n# correlates with lower risk of adverse events such as heart attacks.\n\n\n# Perform ANOVA to test for differences in troponin levels across treatment groups\nanova_result &lt;- aov(Troponin ~ TreatmentGroup, data = syn_dat)\nsummary(anova_result)\n\n               Df Sum Sq Mean Sq F value Pr(&gt;F)    \nTreatmentGroup  2 1.0088  0.5044   284.8 &lt;2e-16 ***\nResiduals      97 0.1718  0.0018                   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n# A significant p-value (p &lt; 0.05) would indicate that there are significant differences in troponin levels \n# between at least two of the treatment groups. Our p-value is &lt;2e-16, suggesting strong evidence for difference.\n\n\n# We can also use linear models with treatment group as a predictor of troponin levels, and so forth.\n# Model 1: treatment only\nm1 &lt;- lm(Troponin ~ TreatmentGroup, data = syn_dat)\nsummary(m1)\n\n\nCall:\nlm(formula = Troponin ~ TreatmentGroup, data = syn_dat)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.150914 -0.015161  0.000462  0.015059  0.131086 \n\nCoefficients:\n                      Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)           0.035161   0.007559   4.652 1.04e-05 ***\nTreatmentGroupB       0.053780   0.010451   5.146 1.39e-06 ***\nTreatmentGroupPlacebo 0.233753   0.010380  22.520  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.04208 on 97 degrees of freedom\nMultiple R-squared:  0.8545,    Adjusted R-squared:  0.8515 \nF-statistic: 284.8 on 2 and 97 DF,  p-value: &lt; 2.2e-16\n\n# Model 2: add demographics + blood pressure\nm2 &lt;- lm(Troponin ~ TreatmentGroup + Age + Gender + BloodPressure, data = syn_dat)\nsummary(m2)\n\n\nCall:\nlm(formula = Troponin ~ TreatmentGroup + Age + Gender + BloodPressure, \n    data = syn_dat)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.15481 -0.01436 -0.00023  0.01403  0.12574 \n\nCoefficients:\n                        Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)            3.330e-02  3.888e-02   0.856    0.394    \nTreatmentGroupB        5.376e-02  1.070e-02   5.023 2.42e-06 ***\nTreatmentGroupPlacebo  2.338e-01  1.058e-02  22.108  &lt; 2e-16 ***\nAge                    1.627e-04  4.696e-04   0.347    0.730    \nGenderMale             6.875e-03  8.566e-03   0.803    0.424    \nBloodPressure         -9.185e-05  2.175e-04  -0.422    0.674    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.04254 on 94 degrees of freedom\nMultiple R-squared:  0.8559,    Adjusted R-squared:  0.8483 \nF-statistic: 111.7 on 5 and 94 DF,  p-value: &lt; 2.2e-16\n\n# Model 3: allow treatment effect to vary by blood pressure\nm3 &lt;- lm(Troponin ~ TreatmentGroup * BloodPressure + Age + Gender, data = syn_dat)\nsummary(m3)\n\n\nCall:\nlm(formula = Troponin ~ TreatmentGroup * BloodPressure + Age + \n    Gender, data = syn_dat)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.155029 -0.014499  0.001073  0.014565  0.121596 \n\nCoefficients:\n                                      Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)                          3.947e-03  5.959e-02   0.066    0.947    \nTreatmentGroupB                      5.510e-02  6.584e-02   0.837    0.405    \nTreatmentGroupPlacebo                3.139e-01  7.137e-02   4.398 2.93e-05 ***\nBloodPressure                        1.076e-04  3.966e-04   0.271    0.787    \nAge                                  2.547e-04  4.768e-04   0.534    0.594    \nGenderMale                           5.505e-03  8.688e-03   0.634    0.528    \nTreatmentGroupB:BloodPressure       -8.076e-06  5.308e-04  -0.015    0.988    \nTreatmentGroupPlacebo:BloodPressure -6.394e-04  5.652e-04  -1.131    0.261    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.0426 on 92 degrees of freedom\nMultiple R-squared:  0.8586,    Adjusted R-squared:  0.8479 \nF-statistic: 79.81 on 7 and 92 DF,  p-value: &lt; 2.2e-16\n\n# Compare fit\nanova(m1, m2, m3)\n\nAnalysis of Variance Table\n\nModel 1: Troponin ~ TreatmentGroup\nModel 2: Troponin ~ TreatmentGroup + Age + Gender + BloodPressure\nModel 3: Troponin ~ TreatmentGroup * BloodPressure + Age + Gender\n  Res.Df     RSS Df Sum of Sq      F Pr(&gt;F)\n1     97 0.17180                           \n2     94 0.17009  3 0.0017082 0.3138 0.8153\n3     92 0.16692  2 0.0031708 0.8738 0.4208\n\nAIC(m1, m2, m3)\n\n   df       AIC\nm1  4 -344.8713\nm2  7 -339.8706\nm3  9 -337.7523\n\n\nAcross models, Treatment Group was the main predictor of Troponin levels, with Age and Blood Pressure also contributing in more complex models. Group B tended to trend higher, with 0.054 ng/mL higher troponin, and Placebo was 0.234 ng/mL higher comparatively. This means that those taking the placebo have a higher risk of heart attack or injury.\nNote: This is a simulated dataset for educational purposes only and does not represent real patient data. Chatgpt-5 mini was used to help generate this code within Positron. All text descriptions are my own."
  }
]